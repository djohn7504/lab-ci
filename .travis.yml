sudo: false

dist: trusty

branches:
  only:
    - master									# <-------- prévient un re-build, si deploy.releases !

env:
  global:
#    - TAG_TARGET='release-test'
#    - TAG_TARGET='release-test-linux'
    - TAG_TARGET='new-target'

script: echo "build $TRAVIS_BUILD_NUMBER" >> deploy/index.html

#before_deploy:
#  - git checkout "$TAG_TARGET"					# <-------- aller dans la bonne branche..

deploy:
  - provider: releases
    on:
      branch: master
    api-key:
      - secure: $GITHUB_TOKEN
    skip-cleanup: true
    file: deploy/index.html

#    tag_name: $TAG_TARGET						# <-------- cible du déploiement
#   tag_name: release-test						# <-------- cible du déploiement			( si on change, alors ancien reste aussi )
    tag_name: new-target						# <-------- cible du déploiement			( si on change, alors ancien reste aussi )
    overwrite: true								# <-------- écrase les fichiers du tag existant !
    
#   prerelease: ?								# <-------- on ne peut changer, que le courant !
#    prerelease: false
    name: 'Release title (Linux)'
    body: 'Release description: déploiement public des assets, avec les sources (visible par le public)'

    verbose: true
#    draft: true										# <-------- NE PAS CHANGER !  (sinon ca change le tag ?..)
